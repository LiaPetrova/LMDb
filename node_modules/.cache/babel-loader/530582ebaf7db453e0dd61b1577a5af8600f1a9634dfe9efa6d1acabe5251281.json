{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Final PRoject -LMDb\\\\lmdb\\\\src\\\\contexts\\\\ShowsConext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport { getAll, getAllFromWatchlist, getOne } from \"../services/showsService\";\nimport { useAuthContext } from \"./AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ShowsContext = /*#__PURE__*/createContext();\nexport const useShowsContext = () => {\n  _s();\n  return useContext(ShowsContext);\n};\n_s(useShowsContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const ShowsProvider = _ref => {\n  _s2();\n  let {\n    children\n  } = _ref;\n  const [moviesList, setMoviesList] = useState([]);\n  const [seriesList, setSeriesList] = useState([]);\n  const [userWatchlist, setUserWatchlist] = useState([]);\n  const [watchlist, setWatchlist] = useState([]);\n  const {\n    currentUser\n  } = useAuthContext();\n  useEffect(() => {\n    getAll('Movie').then(docs => {\n      docs.forEach(doc => {\n        // arr.push({\n        //     id: doc.id,\n        //     fields: doc.fields\n        // });\n        setMoviesList(state => [...state, {\n          id: doc.id,\n          fields: doc.fields\n        }]);\n        console.log(moviesList);\n      });\n      // setMoviesList(arr);\n    });\n\n    getAll('Series').then(docs => {\n      docs.forEach(doc => {\n        // arr.push({\n        //     id: doc.id,\n        //     fields: doc.fields\n        // });\n        setSeriesList(state => [...state, {\n          id: doc.id,\n          fields: doc.fields\n        }]);\n      });\n      // setMoviesList(arr);\n    });\n  }, []);\n  useEffect(() => {\n    if (currentUser !== null && currentUser !== void 0 && currentUser.uid) {\n      getAllFromWatchlist(currentUser.uid).then(result => {\n        setUserWatchlist(result);\n        result.forEach(async x => {\n          const show = await getOne(x.showId, x.type);\n          setWatchlist(state => [...state, {\n            id: show.id,\n            fields: show.fields\n          }]);\n        });\n      });\n    }\n    ;\n  }, [currentUser === null || currentUser === void 0 ? void 0 : currentUser.uid, watchlist]);\n\n  //     useEffect(() => {\n  // console.log(userWatchlist);\n  //        userWatchlist.forEach(async (x) => {\n  //             const show = await getOne(x.showId, x.type);\n  //             setWatchlist(state => [...state, { id: show.id, fields: show.fields }]);\n  //             console.log(watchlist);\n  //         });\n\n  //     }, [userWatchlist]);\n\n  return /*#__PURE__*/_jsxDEV(ShowsContext.Provider, {\n    value: {\n      moviesList,\n      seriesList,\n      watchlist,\n      setWatchlist\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 12\n  }, this);\n};\n_s2(ShowsProvider, \"jt/e8MiuUNowLdsR7Z/ipi2O0ZY=\", false, function () {\n  return [useAuthContext];\n});\n_c = ShowsProvider;\nvar _c;\n$RefreshReg$(_c, \"ShowsProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useState","getAll","getAllFromWatchlist","getOne","useAuthContext","jsxDEV","_jsxDEV","ShowsContext","useShowsContext","_s","ShowsProvider","_ref","_s2","children","moviesList","setMoviesList","seriesList","setSeriesList","userWatchlist","setUserWatchlist","watchlist","setWatchlist","currentUser","then","docs","forEach","doc","state","id","fields","console","log","uid","result","x","show","showId","type","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/User/Desktop/Final PRoject -LMDb/lmdb/src/contexts/ShowsConext.js"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { getAll, getAllFromWatchlist, getOne } from \"../services/showsService\";\r\nimport { useAuthContext } from \"./AuthContext\";\r\n\r\nconst ShowsContext = createContext();\r\nexport const useShowsContext = () => useContext(ShowsContext);\r\nexport const ShowsProvider = ({ children }) => {\r\n    const [moviesList, setMoviesList] = useState([]);\r\n    const [seriesList, setSeriesList] = useState([]);\r\n    const [userWatchlist, setUserWatchlist] = useState([]);\r\n    const [watchlist, setWatchlist] = useState([]);\r\n    const { currentUser } = useAuthContext();\r\n    useEffect(() => {\r\n\r\n        getAll('Movie')\r\n            .then(docs => {\r\n                docs.forEach((doc) => {\r\n                    // arr.push({\r\n                    //     id: doc.id,\r\n                    //     fields: doc.fields\r\n                    // });\r\n                    setMoviesList(state => [...state, { id: doc.id, fields: doc.fields }]);\r\n                    console.log(moviesList);\r\n                });\r\n                // setMoviesList(arr);\r\n            });\r\n        getAll('Series')\r\n            .then(docs => {\r\n                docs.forEach((doc) => {\r\n                    // arr.push({\r\n                    //     id: doc.id,\r\n                    //     fields: doc.fields\r\n                    // });\r\n                    setSeriesList(state => [...state, { id: doc.id, fields: doc.fields }]);\r\n                });\r\n                // setMoviesList(arr);\r\n            });\r\n        \r\n    }, []);\r\n    useEffect(() => {\r\n\r\n        if (currentUser?.uid) {\r\n            getAllFromWatchlist(currentUser.uid)\r\n                .then(result => {\r\n                    setUserWatchlist(result);\r\n                    result.forEach(async (x) => {\r\n                        const show = await getOne(x.showId, x.type);\r\n                        setWatchlist(state => [...state, { id: show.id, fields: show.fields }]);\r\n                    });\r\n                });\r\n        };\r\n\r\n    }, [currentUser?.uid, watchlist]);\r\n\r\n//     useEffect(() => {\r\n// console.log(userWatchlist);\r\n//        userWatchlist.forEach(async (x) => {\r\n//             const show = await getOne(x.showId, x.type);\r\n//             setWatchlist(state => [...state, { id: show.id, fields: show.fields }]);\r\n//             console.log(watchlist);\r\n//         });\r\n\r\n//     }, [userWatchlist]);\r\n\r\n    return <ShowsContext.Provider value={{ moviesList, seriesList, watchlist, setWatchlist }}>\r\n        {children}\r\n    </ShowsContext.Provider>\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}