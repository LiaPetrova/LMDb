{"ast":null,"code":"import { addDoc, collection, getDocs, orderBy, query, serverTimestamp, where } from \"firebase/firestore\";\nimport { firestore } from \"../firebase_setup/firebase\";\nimport { getUserAdditionalData } from \"./authService\";\nconst commentCollection = collection(firestore, 'comments');\nexport const postComment = async (showId, ownerId, commentContent) => {\n  const owner = await getUserAdditionalData(ownerId);\n  try {\n    return await addDoc(commentCollection, {\n      showId,\n      commentContent,\n      likes: [],\n      dislikes: [],\n      ownerId,\n      ownerName: owner.name,\n      createdAt: serverTimestamp()\n    });\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\nexport const getAllComments = async showId => {\n  const orderedQuery = query(commentCollection, orderBy('createdAt', 'asc'), where('showId', '==', showId));\n  try {\n    const result = await getDocs(orderedQuery).then(docs => {\n      let arr = [];\n      docs.forEach(doc => {\n        let fields = doc.data();\n        arr.push({\n          id: doc.id,\n          fields: fields\n        });\n      });\n      return arr;\n    });\n    // console.log(result);\n    return result;\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};","map":{"version":3,"names":["addDoc","collection","getDocs","orderBy","query","serverTimestamp","where","firestore","getUserAdditionalData","commentCollection","postComment","showId","ownerId","commentContent","owner","likes","dislikes","ownerName","name","createdAt","err","console","error","alert","message","getAllComments","orderedQuery","result","then","docs","arr","forEach","doc","fields","data","push","id"],"sources":["C:/Users/User/Desktop/Final PRoject -LMDb/lmdb/src/services/commentsService.js"],"sourcesContent":["import { addDoc, collection, getDocs, orderBy, query, serverTimestamp, where } from \"firebase/firestore\";\r\nimport { firestore } from \"../firebase_setup/firebase\";\r\nimport { getUserAdditionalData } from \"./authService\"\r\n\r\nconst commentCollection = collection(firestore, 'comments');\r\n\r\nexport const postComment = async (showId, ownerId, commentContent) => {\r\n    \r\n    const owner = await getUserAdditionalData(ownerId);\r\n    try {\r\n        return await addDoc(commentCollection, {\r\n            showId,\r\n            commentContent,\r\n            likes: [],\r\n            dislikes: [],\r\n            ownerId,\r\n            ownerName: owner.name,\r\n            createdAt: serverTimestamp()\r\n        });\r\n    } catch (err) {\r\n        console.error(err);\r\n        alert(err.message);\r\n    }\r\n};\r\n\r\nexport const getAllComments = async (showId) => {\r\n    const orderedQuery = query(commentCollection, orderBy('createdAt', 'asc'), where ('showId', '==', showId));\r\n    try {\r\n        const result = await getDocs(orderedQuery)\r\n            .then(docs => {\r\n                let arr = [];\r\n\r\n                docs.forEach((doc) => {\r\n                    let fields = doc.data();\r\n\r\n                    arr.push({\r\n                        id: doc.id,\r\n                        fields: fields\r\n                    });\r\n                });\r\n                return arr;\r\n            });\r\n        // console.log(result);\r\n        return result;\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n        alert(err.message);\r\n    }\r\n}"],"mappings":"AAAA,SAASA,MAAM,EAAEC,UAAU,EAAEC,OAAO,EAAEC,OAAO,EAAEC,KAAK,EAAEC,eAAe,EAAEC,KAAK,QAAQ,oBAAoB;AACxG,SAASC,SAAS,QAAQ,4BAA4B;AACtD,SAASC,qBAAqB,QAAQ,eAAe;AAErD,MAAMC,iBAAiB,GAAGR,UAAU,CAACM,SAAS,EAAE,UAAU,CAAC;AAE3D,OAAO,MAAMG,WAAW,GAAG,MAAAA,CAAOC,MAAM,EAAEC,OAAO,EAAEC,cAAc,KAAK;EAElE,MAAMC,KAAK,GAAG,MAAMN,qBAAqB,CAACI,OAAO,CAAC;EAClD,IAAI;IACA,OAAO,MAAMZ,MAAM,CAACS,iBAAiB,EAAE;MACnCE,MAAM;MACNE,cAAc;MACdE,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZJ,OAAO;MACPK,SAAS,EAAEH,KAAK,CAACI,IAAI;MACrBC,SAAS,EAAEd,eAAe;IAC9B,CAAC,CAAC;EACN,CAAC,CAAC,OAAOe,GAAG,EAAE;IACVC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAClBG,KAAK,CAACH,GAAG,CAACI,OAAO,CAAC;EACtB;AACJ,CAAC;AAED,OAAO,MAAMC,cAAc,GAAG,MAAOd,MAAM,IAAK;EAC5C,MAAMe,YAAY,GAAGtB,KAAK,CAACK,iBAAiB,EAAEN,OAAO,CAAC,WAAW,EAAE,KAAK,CAAC,EAAEG,KAAK,CAAE,QAAQ,EAAE,IAAI,EAAEK,MAAM,CAAC,CAAC;EAC1G,IAAI;IACA,MAAMgB,MAAM,GAAG,MAAMzB,OAAO,CAACwB,YAAY,CAAC,CACrCE,IAAI,CAACC,IAAI,IAAI;MACV,IAAIC,GAAG,GAAG,EAAE;MAEZD,IAAI,CAACE,OAAO,CAAEC,GAAG,IAAK;QAClB,IAAIC,MAAM,GAAGD,GAAG,CAACE,IAAI,EAAE;QAEvBJ,GAAG,CAACK,IAAI,CAAC;UACLC,EAAE,EAAEJ,GAAG,CAACI,EAAE;UACVH,MAAM,EAAEA;QACZ,CAAC,CAAC;MACN,CAAC,CAAC;MACF,OAAOH,GAAG;IACd,CAAC,CAAC;IACN;IACA,OAAOH,MAAM;EAEjB,CAAC,CAAC,OAAOP,GAAG,EAAE;IACVC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAClBG,KAAK,CAACH,GAAG,CAACI,OAAO,CAAC;EACtB;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}